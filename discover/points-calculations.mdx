---
title: 'Points Calculations'
description: ''
---

Sophon Farming is a staking system where users can earn **Sophon Points (SP)** by staking tokens in various pools. The following guide explains how points are calculated and distributed.

<Info>
**Key Concepts**
- Points are generated every block and distributed across pools.
- Users earn points by staking tokens in pools.
- Staking positions can be boosted for increased earnings.
- Points distribution is based on pool values and stake amounts.
- Some pools can have multipliers greater than 1.
</Info>

## Points Generation and Distribution

### Global Point Generation

- A **fixed number** of points (`10 SP`) are generated each block.
- Points are distributed **proportionally** across all active pools.

### Pool Value Calculations

Each pool's value is calculated using the following formula:

<Tip>
$ \text{Pool Value} = \frac{\text{Total Tokens Staked} \times \text{Token Price} \times \text{Pool Multiplier}}{10^{18}} $
</Tip>

Points are then distributed to pools based on their relative value:

<Tip>
$$ \text{Pool Points} = \text{Points Per Block} \times \left( \frac{\text{Pool Value}}{\text{Total Value of All Pools}} \right) $$
</Tip>

## Pool Mechanics

### Pool State Variables

Each pool tracks:

- `accPointsPerShare`: Accumulated points per staked token (scaled by 1e18).
- `lastRewardBlock`: Block number of last update.
- `amount`: Total tokens staked (*including boosts*).

### Pool Updates

When the pool is updated, it calculates new points:

<Tip>
$$ \text{Increase in Points Per Share} = \frac{\text{Pool Points} \times 10^{18}}{\text{Total Pool Stake}} $$
</Tip>

Updates occur when:

- Users **deposit** tokens.
- Users **withdraw** tokens.
- Users apply **boosts**.
- Points are **claimed**.

---

## User Rewards

### User State Tracking

The system keeps track of each user's information using the following details:

- **Total Stake:** The combined total of the user's deposit and any additional boost applied to their stake.
- **Boost Amount:** The extra amount added to the user's stake through a boost mechanism.
- **Original Deposit:** The initial amount the user deposited without any boosts.
- **Reward Debt:** A value used internally to calculate rewards. It helps track how much of the rewards the user has already earned.
- **Accumulated Rewards:** The total points or rewards the user has accumulated over time.

### Points Calculation

User's pending points are calculated as:

<Tip>
$$ \text{Pending Points} = \left( \frac{\text{User Total Stake} \times \text{Pool Points Per Share}}{10^{18}} \right) + \text{Settled Points} - \text{Reward Debt} $$
</Tip>

### Boosting Mechanics

- Users can **boost** a portion of their deposit.
- Boosted amounts gain **multiplied rewards**.
- Boosted tokens **cannot be withdrawn**.
- Original stake remains **withdrawable**.

---

## Example Calculations

### Basic Scenario

**Initial conditions:**

```
Points Per Block: 1000 SP
Pool A Multiplier: 1.0
Token Price: $2.00
```

#### Single Pool

1. User stakes 100 tokens:

```
Pool Value = (100 tokens × $2.00 × 1.0) ÷ 1e18
Pool Points Per Block = 1000 SP (100% of points)
```

After 10 blocks:

```
Total Points Generated = 10 blocks × 1000 SP = 10,000 SP
Points Per Share = (10,000 SP × 1e18) ÷ 100 tokens = 100e18
User's Pending Points = (100 tokens × 100e18) ÷ 1e18 = 10,000 SP
```

#### Multiple Pools

**With Pool B added:**

```
Pool A: 100 tokens ($200 value)
Pool B: 300 tokens ($600 value)
Total Value: $800

Per Block Distribution:
Pool A: 1000 SP × ($200 ÷ $800) = 250 SP
Pool B: 1000 SP × ($600 ÷ $800) = 750 SP

After 10 blocks:
Pool A User: 2,500 SP
Pool B User: 7,500 SP
```

#### Boosting Example

Pool A user applies **2x boost** to 50 tokens:

```
Original Stake: 100 tokens
Boosted Amount: 50 tokens
Effective Stake: 150 tokens
New Pool Value = (150 tokens × $2.00 × 1.0) ÷ 1e18
```

This results in a **50% increase** in point earnings.

---

## Summary

<Info>
**Key Points**
- Points generation is **block-based**.
- Distribution is **proportional** to **pool value**.
- Users earn based on their **stake size**.
- **Boosts** increase effective stake.
- Points are tracked **per share**.
</Info>

---

<Warning>
**Remember**
- **Larger stakes** earn proportionally more points.
- **Boosting** increases earnings but **locks tokens**.
- Points accrue **continuously** while staked.
- Only **unboosted tokens** can be withdrawn.
</Warning>

**For more information, please see the [relevant contract](https://github.com/sophon-org/farming-contracts/blob/bridgin/contracts/farm/SophonFarmingL2.sol) on our [GitHub](https://github.com/sophon-org).**
